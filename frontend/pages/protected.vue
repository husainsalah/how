<template>
  <div>
    <div class="relative">
    <div class="container relative">
      <main>
      <div class="mx-auto xl:pt-10 pb-10 space-y-6 lg:px-12 flex flex-col items-center">
        <div class="flex mx-auto justify-end">
          <button @click="handleLogout">Logout</button>
      </div>
      <div class="flex flex-col gap-4 items-center">
        <h2>INSANE WHO SANE - DON'T LEAVE ME EP [WDJT-003]</h2>
    
<div class="grid grid-cols-1 md:grid-cols-1 p-2 md:p-12 w-full">
 
 
 <div class="px-2 md:px-4 h-full">
    <h4>Listen to the Full Release</h4>
      <iframe width="100%" height="420px" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/2069088213%3Fsecret_token%3Ds-KZ6sqkkO70F&color=%23111111&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"></div>
   
  </div>
  
  <div class="px-2 md:px-4">
    <h4 class="font-weight-100">Video Preview</h4>
   <ResponsiveVideoList 
    videoId="1113675209" 
    platform="vimeo" 
    title="WDJT-003"
    :playlist="videoPlaylist"
    :showPlaylist="true"
    playlistTitle="Don't Leave Me EP"
    playlistLayout="grid"
    @videoChange="handleVideoChange"
    :params="{
      autoplay: false, loop: false, title: 0,
      byline: 0,
      portrait: 0,
      playbar: 0,
      sharing: 0
    }"
  />
</div>
 
 
</div>

<div class="grid grid-cols-1 md:grid-cols-2 p-2 md:p-12">
  <div>
    <img src="frontend/assets/images/WDJT003.png" class="w-auto py-2 px-2 md:px-4" />
  </div>
  <div>
    <img src="frontend/assets/images/jacket003-2.png" class="w-auto py-2 px-2 md:px-4" />
  </div>
</div>


<div class="mx-8 px-2 md:px-4">
<h3>For Immediate Release 3 September, 2025</h3>

<ul>
  <li>
    <span class="label">Artist:</span> Insane Who Sane
  </li>
  <li>
    <span class="label">Title:</span> Don’t Leave Me EP
  </li>
  <li>
   <span class="label"> Label:</span> House of Wadjet Records
  </li>
  <li>
   <span class="label"> Release Date:</span> End of September (TBC)
  </li>
  <li>
   <span class="label"> Cat. No.:</span> WDJT003
  </li>
  <li>
   <span class="label"> Format:</span> Vinyl and Digital    
  </li>
</ul>
    <ul>
      <li><h5 class="label">Tracklist: </h5></li>
      <li>A1. Insane Who Sane - Don't Leave Me</li>
      <li>A2. Insane Who Sane - Chase You (Indio Remix)</li>
      <li>B1. Insane Who Sane - Chase You (Original Mix)</li>
    </ul>
<p>DETROIT, MI — House of Wadjet Records: Ancient Future Music, continues to push boundaries with its third release, “Don’t Leave Me EP," by Insane Who Sane and featuring a remix by John Beltran, aka Indio. This latest offering further cements the label's commitment to "Ancient Future Music" while exploring new sonic territories that blend techno, ambient textures, and electronic soul. Following the success of the genre-blurring "Keep Pushin Aun EP," Insane Who Sane returns to his techno roots with a single that can only be described as a dance floor banger, showcasing his evolving artistry and the label's distinctive sound.</p>
<p>The EP opens with "Don't Leave Me," an infectious dance floor anthem that pulses at a commanding 134 BPM. Built upon the foundation of a 909 kick, the track comes alive with groovy toms and a hypnotic bass line that immediately commands attention. Insane Who Sane masterfully weaves in string arrangements and vocal samples from Teddy Pendergrass's disco classic of the same name, creating a bridge between eras that feels both reverent and revolutionary. The track pays homage to techno's disco origins while channeling the raw energy and innovation of Detroit legends like Robert Hood and Underground Resistance, resulting in a composition that honors the past while pushes into the future.</p>
<p>The centerpiece of the release comes in two forms with "Chase You." The Indio remix, crafted by acclaimed producer John Beltran, transforms the original composition into a Detroit techno classic, taking you on a deep and hard emotional quest while adding layers of sophisticated arrangement and textural depth. Beltran's expertise shines through in his ability to re-contextualize the source material, creating a version that stands as both a respectful interpretation and a bold reimagining.</p>
<p>The Original Mix of "Chase You" serves as the EP's commanding finale, presenting Insane Who Sane's unfiltered vision in its most potent form. This track epitomizes the "Ancient Future Music" ethos through its seamless fusion of timeless melodies and cutting-edge production techniques. Anchored by the North African inspired broken beat that has become a signature element of Insane Who Sane's sound, the composition draws from powerful sources: Max Romeo's dub classic "Chase the Devil" and Eddy Hazel's "California Dreaming." These samples transform the track into something greater than its parts—a meditation on the universal quest for liberation and justice that resonates across cultures and generations. The result is a profound homage to Black musical heritage while simultaneously pushing the boundaries of contemporary electronic music, creating a listening experience that feels both deeply rooted and boundary-breaking.</p>
<p>Mastered at Sonic Impact by Scott Radke and manufactured by Archer Pressing, the “Don’t Leave Me EP" maintains the high production standards that House of Wadjet Records has established. The release demonstrates the label's continued evolution while staying true to its core mission of creating music that transcends traditional genre boundaries.</p>
<p>This three-track journey represents another significant step forward for both Insane Who Sane as an artist and House of Wadjet Records as a platform for innovative electronic music. The EP reinforces the label's position as a vital voice in the intersection between Detroit's electronic music heritage and global underground culture.</p>
<p>Press contact – h@vhe.art</p>
<ul>
  <li>
    <span class="label">IG:</span> @house.of.wadjet.records, @insane_who_sane</li>
  <li>
    <span class="label">BandCamp:</span> https://houseofwadjet.bandcamp.com/
  </li>
  <li>
    <span class="label">Distribution:</span> normtalley@gmail.com</li>
  <li>
    <span class="label">Mastering:</span> Scott Radkey at Sonic Impact</li>
  <li>
    <span class="label">Producer:</span> Husain Salah</li>
  <li>
    <span class="label">Rights Society:</span> House of Wadjet Records / BMI
  </li>
</ul>

<h4>About House of Wadjet</h4>
<p>
House of Wadjet Records, Ancient Future Music is a Detroit-based record label that bridges millennia through sound. Founded in 2022 by Egyptian-born, Detroit-based artist Insane Who Sane, the label serves as a creative vessel for his distinctive vision of Ancient Future Music. Drawing from years of studying music in Detroit, Insane Who Sane brings together deep historical roots with cutting-edge innovation. House of Wadjet synthesizes these rich musical traditions through a futuristic lens, creating a sound that truly embodies the label's Ancient Future Music ethos.
</p>

<h4>About Insane Who Sane</h4>
<p>Egyptian-born, Detroit-based producer and DJ Insane Who Sane is shaping a genuine sound through his label House of Wadjet Records. With releases that seamlessly blend elements of techno, house, and neo-soul, his music stays true to the label's guiding philosophy of "Ancient Future Music"—a sonic vision that honors the past while boldly pushing electronic music into new territories.</p>
<h4>About John Beltran AKA INDIO</h4>
<p>John Beltran has been producing ambient electronica music since the early 90's. He has had many legendary releases on various important labels over the past 30 years. John creates many different styles of music from ambient to techno to Latin and more.
</p>

<!-- Download Release Section -->
<div class="download-section my-12 text-center">
  
  <p class="mb-6">For distribution requests, contact <a href="mailto:normtalley@gmail.com">normtalley@gmail.com</a></p>
  <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
    <button 
      @click="() => { console.log('Button clicked!'); openDownloadModal() }" 
      class="download-button text-white font-thin py-3 px-8 rounded-lg text-lg"
    >
      Download WDJT-003
    </button>
    
    <button 
      @click="handleWholesaleRequest"
      class="wholesale-button text-white hover:text-white font-thin py-3 px-8 rounded-lg text-lg border border-white border-radius-0 text-center no-underline"
    >
      Wholesale Requests
    </button>
  </div>
</div>
</div>
    
    </div>
    </div>
  </main>  
  

<!-- Download Modal - Moved outside main content -->
<div v-if="showDownloadModal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div ref="modalRef" class="modal-content bg-white rounded-lg p-8 max-w-md w-full mx-4">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-xl font-bold">Download Release</h3>
      <button 
        @click="closeDownloadModal" 
        class="text-gray-500 hover:text-white-700 text-2xl"
      >
        ×
      </button>
    </div>
    
    <form @submit.prevent="handleDownload" class="space-y-4">
      <div>
        <label for="name" class="block text-sm font-medium text-white-700 mb-2">Name *</label>
        <input
          id="name"
          v-model="downloadForm.name"
          type="text"
          required
          class="form-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Enter your name"
        />
      </div>
      
      <div>
        <label for="email" class="block text-sm font-medium text-white-700 mb-2">Email *</label>
        <input
          id="email"
          v-model="downloadForm.email"
          type="email"
          required
          class="form-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Enter your email"
        />
      </div>
      
      <div>
        <label class="block text-sm font-medium text-white-700 mb-2">Reason for Download *</label>
        <div class="space-y-2">
          <label class="flex items-center">
            <input
              type="checkbox"
              v-model="downloadForm.reasons.press"
              class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <span class="text-sm text-white-700">Press</span>
          </label>
          <label class="flex items-center">
            <input
              type="checkbox"
              v-model="downloadForm.reasons.radioPlay"
              class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <span class="text-sm text-white-700">Radio Play</span>
          </label>
          <label class="flex items-center">
            <label class="flex items-center">
              <input
                type="checkbox"
                v-model="downloadForm.reasons.personal"
                class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
              />
              <span class="text-sm text-white-700">Personal</span>
            </label>
          </label>
        </div>
      </div>
      
      <div>
        <label for="notes" class="block text-sm font-medium text-white-700 mb-2">Notes</label>
        <textarea
          id="notes"
          v-model="downloadForm.notes"
          rows="3"
          class="form-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
          placeholder="Any additional notes or comments..."
        ></textarea>
      </div>
      
      <div class="pt-4">
        <button
          type="submit"
          :disabled="!isFormValid"
          :class="[
            'download-submit-btn w-full py-3 px-4 font-medium transition-colors duration-200',
            isFormValid 
              ? 'bg-green-600 hover:bg-green-700 text-white cursor-pointer' 
              : 'bg-gray-300 text-gray-500 cursor-not-allowed'
          ]"
        >
          Download EP
        </button>
      </div>
    </form>
    
    <p class="text-sm text-gray-600 mt-4 text-center">
      By downloading, you agree to receive updates about future releases.
    </p>
  </div>
</div>
</div>
    </div>
    </div>

</template>

<script setup>
import { ref, computed, watch, nextTick } from 'vue'

useSiteMetadata({
  title: "Don't Leave Me EP - Press",
  description: "Private page, for press personelle",
});

const handleLogout = async () => {
  try {
    await $fetch('/api/auth/logout', { method: 'POST' })
    await navigateTo('/login')
  }
  catch (error) {
    console.error('Logout error:', error)
  }
}

const handleVideoChange = (video) => {
  console.log('Video changed to:', video)
  // You can add any logic here when a video is selected from the playlist
}

const videoPlaylist = ref([
  {
    id: 'lIWBg1aey6I',    
    platform: 'youtube',
    title: 'Don\'t Leave Me',
    author: 'Insane Who Sane',
    duration: 60 // in seconds
  },
  {
    id: 'YY8GGlfwS54',
    platform: 'youtube',
    title: 'Chase You (Indio Remix)',
    author: 'Insane Who Sane',
    duration: 60 // in seconds
  },
  {
    id: 'aHLqkjpZsl8',
    platform: 'youtube',
    title: 'Chase You (Original Mix)',
    author: 'Insane Who Sane',
    duration: 60 // in seconds
  },
]);

// Download modal functionality
const showDownloadModal = ref(false)
const downloadForm = ref({
  name: '',
  email: '',
  reasons: {
    press: false,
    radioPlay: false,
    personal: false
  },
  notes: ''
})
const modalRef = ref(null)

// Computed property to check if form is valid
const isFormValid = computed(() => {
  const hasName = downloadForm.value.name.trim() !== ''
  const hasEmail = downloadForm.value.email.trim() !== ''
  const hasReason = downloadForm.value.reasons.press || downloadForm.value.reasons.radioPlay || downloadForm.value.reasons.personal
  
  return hasName && hasEmail && hasReason
})

// Open download modal
const openDownloadModal = () => {
  showDownloadModal.value = true
}

// Close download modal
const closeDownloadModal = () => {
  showDownloadModal.value = false
  // Reset form
  downloadForm.value.name = ''
  downloadForm.value.email = ''
  downloadForm.value.reasons.press = false
  downloadForm.value.reasons.radioPlay = false
  downloadForm.value.reasons.personal = false
  downloadForm.value.notes = ''
}

// Handle click outside modal to close
const handleClickOutside = (event) => {
  if (modalRef.value && !modalRef.value.contains(event.target)) {
    closeDownloadModal()
  }
}

// Handle keyboard events
const handleKeydown = (event) => {
  if (event.key === 'Escape') {
    closeDownloadModal()
  }
}

// Watch for modal state changes to add/remove click outside listener
watch(showDownloadModal, (isOpen) => {
  if (isOpen) {
    nextTick(() => {
      // Add a small delay to prevent immediate closure from click event conflicts
      setTimeout(() => {
        try {
          document.addEventListener('click', handleClickOutside)
          document.addEventListener('keydown', handleKeydown)
        } catch (error) {
          console.error('Error adding event listeners:', error)
        }
      }, 100) // 100ms delay to prevent race condition
    })
  } else {
    try {
      document.removeEventListener('click', handleClickOutside)
      document.removeEventListener('keydown', handleKeydown)
    } catch (error) {
      console.error('Error removing event listeners:', error)
    }
  }
})

// Handle wholesale request
const handleWholesaleRequest = () => {
  const subject = 'Wholesale Request - WDJT-003'
  const body = `Hi,

I'm interested in wholesale pricing for the Insane Who Sane - Don't Leave Me EP [WDJT-003].

Please provide wholesale pricing and minimum order quantities.

Thanks!`
  
  const mailtoUrl = `mailto:normtalley@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`
  window.open(mailtoUrl, '_blank')
}

// Handle download
const handleDownload = async () => {
  if (!isFormValid.value) return
  
  try {
    // Here you can add logic to:
    // 1. Save the user's information to your database
    // 2. Send a confirmation email
    // 3. Log the download for analytics
    
    console.log('Download requested by:', {
      name: downloadForm.value.name,
      email: downloadForm.value.email,
      reasons: downloadForm.value.reasons,
      notes: downloadForm.value.notes
    })
    
    // Use Dropbox for reliable direct downloads
    const dropboxUrl = 'https://www.dropbox.com/scl/fi/i6bzi1inp4gv4lrx4kvls/INSANE-WHO-SANE-Chase-You-EP-masters-MP3-compressed-for-auditioning-sharing-20250829T181414Z-1-001.zip?rlkey=3g9up8n0mo309lmkh4ug13lsh&st=gbyw4h60&dl=1'
    
    try {
      // Create a temporary link element to trigger direct download
      const link = document.createElement('a')
      link.href = dropboxUrl
      link.download = 'Insane-Who-Sane-Dont-Leave-Me-EP-WDJT-003.zip'
      link.target = '_blank'
      
      // Add to DOM, click, and remove
      document.body.appendChild(link)
      link.click()
      document.body.removeChild(link)
      
      // Close modal after successful download initiation
      closeDownloadModal()
      
      // Show success message
      alert('Download started! The file should begin downloading automatically.')
      
    } catch (downloadError) {
      console.error('Direct download failed:', downloadError)
      
      // Fallback: Open Dropbox in new tab
      const fallbackUrl = dropboxUrl.replace('/dl=1', '')
      window.open(fallbackUrl, '_blank')
      
      closeDownloadModal()
      alert('Opening Dropbox as fallback. Click the download button to save the file.')
    }
    
  } catch (error) {
    console.error('Download error:', error)
    alert('There was an error with the download. Please try again.')
  }
}
</script>
<style scoped>
main p {
  padding-top: 1em;
}
main ul li {
  padding-left: 1em;
}
main ul{
  padding-top: 1em;
}
main h4{
  padding-top: 1em;
  font-size: 1.4em;
  font-weight: 500;
}
main h2{
  padding-top: 1em;
  font-size: 1.6em;
  font-weight: 500;
}
main h3{
  
  font-size: 1.5em;
  font-weight: 500;
}
main .label{
  font-weight: bold;
}

/* Download modal styles */
.download-section {
  
  border-radius: 12px;
  padding: 2rem;
  margin: 2rem 0;
}

.download-button {
  border: 1px solid white;
  transition: all 0.3s ease;
  border-radius: 0px !important;
  font-size: .9em;
} 

.download-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(236, 248, 5, 0.4);
}

.wholesale-button {
  border: 1px solid white;
  transition: all 0.3s ease;
  border-radius: 0px !important;
  font-size: .9em;
  text-decoration: none;
  display: inline-block;
}

.wholesale-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(236, 248, 5, 0.4);
  text-decoration: none;
}

.modal-overlay {
background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
  backdrop-filter: blur(4px);
  z-index: 9999; /* Higher z-index */}

.modal-content {
 background-color: black; /* Explicit white background */
  z-index: 10000; 
  color: white;
}
@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.form-input:focus {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.download-submit-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
</style>